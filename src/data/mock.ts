import type { Deal, Store, Category, User, Comment } from "@/types/deals";
import { generateDealSlug } from "@/lib/slugify";

// â”€â”€â”€ Time helpers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const NOW = Date.now();
const HOUR = 3_600_000;
const DAY = 86_400_000;

// â”€â”€â”€ Stores â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
export const stores: Store[] = [
  { id: "amazon", name: "Amazon", slug: "amazon", domain: "amazon.com", activeDeals: 142, isFeatured: true },
  { id: "nike", name: "Nike", slug: "nike", domain: "nike.com", activeDeals: 67, isFeatured: true },
  { id: "target", name: "Target", slug: "target", domain: "target.com", activeDeals: 89, isFeatured: true },
  { id: "walmart", name: "Walmart", slug: "walmart", domain: "walmart.com", activeDeals: 124, isFeatured: true },
  { id: "bestbuy", name: "Best Buy", slug: "best-buy", domain: "bestbuy.com", activeDeals: 93, isFeatured: true },
  { id: "apple", name: "Apple", slug: "apple", domain: "apple.com", activeDeals: 18, isFeatured: true },
  { id: "samsung", name: "Samsung", slug: "samsung", domain: "samsung.com", activeDeals: 45, isFeatured: true },
  { id: "adidas", name: "Adidas", slug: "adidas", domain: "adidas.com", activeDeals: 52, isFeatured: true },
  { id: "macys", name: "Macy's", slug: "macys", domain: "macys.com", activeDeals: 78, isFeatured: true },
  { id: "nordstrom", name: "Nordstrom", slug: "nordstrom", domain: "nordstrom.com", activeDeals: 41, isFeatured: true },
  { id: "homedepot", name: "Home Depot", slug: "home-depot", domain: "homedepot.com", activeDeals: 63, isFeatured: false },
  { id: "lowes", name: "Lowe's", slug: "lowes", domain: "lowes.com", activeDeals: 47, isFeatured: false },
  { id: "ubereats", name: "Uber Eats", slug: "uber-eats", domain: "ubereats.com", activeDeals: 34, isFeatured: true },
  { id: "doordash", name: "DoorDash", slug: "doordash", domain: "doordash.com", activeDeals: 28, isFeatured: true },
  { id: "sephora", name: "Sephora", slug: "sephora", domain: "sephora.com", activeDeals: 56, isFeatured: true },
  { id: "ulta", name: "Ulta", slug: "ulta", domain: "ulta.com", activeDeals: 42, isFeatured: false },
  { id: "rei", name: "REI", slug: "rei", domain: "rei.com", activeDeals: 31, isFeatured: false },
  { id: "costco", name: "Costco", slug: "costco", domain: "costco.com", activeDeals: 37, isFeatured: true },
  { id: "wayfair", name: "Wayfair", slug: "wayfair", domain: "wayfair.com", activeDeals: 85, isFeatured: false },
  { id: "spotify", name: "Spotify", slug: "spotify", domain: "spotify.com", activeDeals: 8, isFeatured: true },
  { id: "adobe", name: "Adobe", slug: "adobe", domain: "adobe.com", activeDeals: 12, isFeatured: false },
  { id: "nordvpn", name: "NordVPN", slug: "nordvpn", domain: "nordvpn.com", activeDeals: 6, isFeatured: false },
  { id: "grubhub", name: "Grubhub", slug: "grubhub", domain: "grubhub.com", activeDeals: 19, isFeatured: false },
  { id: "chewy", name: "Chewy", slug: "chewy", domain: "chewy.com", activeDeals: 24, isFeatured: false },
  { id: "shein", name: "SHEIN", slug: "shein", domain: "shein.com", activeDeals: 96, isFeatured: false },
];

// â”€â”€â”€ Categories â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
export const categories: Category[] = [
  { id: "electronics", name: "Electronics", slug: "electronics", icon: "ðŸ’»", dealCount: 234, color: "#3B82F6" },
  { id: "fashion", name: "Fashion & Apparel", slug: "fashion", icon: "ðŸ‘•", dealCount: 189, color: "#EC4899" },
  { id: "food", name: "Food & Dining", slug: "food-dining", icon: "ðŸ”", dealCount: 156, color: "#F97316" },
  { id: "travel", name: "Travel", slug: "travel", icon: "âœˆï¸", dealCount: 87, color: "#06B6D4" },
  { id: "beauty", name: "Health & Beauty", slug: "health-beauty", icon: "ðŸ’„", dealCount: 143, color: "#D946EF" },
  { id: "home", name: "Home & Garden", slug: "home-garden", icon: "ðŸ ", dealCount: 198, color: "#84CC16" },
  { id: "software", name: "Software & Apps", slug: "software", icon: "ðŸ“±", dealCount: 76, color: "#8B5CF6" },
  { id: "gaming", name: "Gaming", slug: "gaming", icon: "ðŸŽ®", dealCount: 112, color: "#EF4444" },
  { id: "sports", name: "Sports & Outdoors", slug: "sports-outdoors", icon: "âš½", dealCount: 94, color: "#14B8A6" },
  { id: "pets", name: "Pet Supplies", slug: "pet-supplies", icon: "ðŸ¾", dealCount: 58, color: "#F59E0B" },
];

// â”€â”€â”€ Users â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
export const users: User[] = [
  { id: "u1", username: "DealHunter99", reputation: 4820, badges: ["Top Contributor", "Verified Finder"], dealsSubmitted: 147 },
  { id: "u2", username: "SaverSam", reputation: 2340, badges: ["Rising Star"], dealsSubmitted: 63 },
  { id: "u3", username: "CouponQueen", reputation: 7150, badges: ["Top Contributor", "Legendary", "First 100"], dealsSubmitted: 312 },
  { id: "u4", username: "BargainBoss", reputation: 1890, badges: ["Newcomer"], dealsSubmitted: 28 },
  { id: "u5", username: "TechDeals_Mike", reputation: 3670, badges: ["Specialist: Electronics"], dealsSubmitted: 89 },
];

// â”€â”€â”€ Helpers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const s = (id: string): Store => stores.find((x) => x.id === id)!;
const c = (id: string): Category => categories.find((x) => x.id === id)!;

// â”€â”€â”€ Deals â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const rawDeals = [
  // â”€â”€ HOT RIGHT NOW (high velocity, trending) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  {
    id: "deal-1",
    title: "Save 40% on Select Electronics",
    description: "Huge savings on top-rated electronics including headphones, speakers, and smart home devices.",
    code: "TECH40",
    store: s("amazon"),
    category: c("electronics"),
    savingsType: "percent_off",
    savingsAmount: "40% OFF",
    savingsValue: 40,
    discountType: "code",
    conditions: "Select items only. Prime members get free shipping.",
    upvotes: 1847,
    downvotes: 23,
    workedYes: 847,
    workedNo: 12,
    commentCount: 58,
    usedLastHour: 142,
    status: "verified",
    source: "ai_discovered",
    isVerified: true,
    isTrending: true,
    isCommunityPick: true,
    createdAt: new Date(NOW - 3 * HOUR).toISOString(),
    expiresAt: new Date(NOW + 48 * HOUR).toISOString(),
    lastVerifiedAt: new Date(NOW - HOUR).toISOString(),
    dealUrl: "https://amazon.com/deals",
    tags: ["electronics", "amazon", "prime"],
  },
  {
    id: "deal-2",
    title: "Extra 25% Off All Sale Styles",
    description: "Stack this code on top of already-reduced sale items for massive savings on sneakers, apparel, and more.",
    code: "EXTRA25",
    store: s("nike"),
    category: c("fashion"),
    savingsType: "percent_off",
    savingsAmount: "25% OFF",
    savingsValue: 25,
    discountType: "code",
    conditions: "Applies to sale items only.",
    upvotes: 1203,
    downvotes: 18,
    workedYes: 634,
    workedNo: 8,
    commentCount: 42,
    usedLastHour: 98,
    status: "verified",
    source: "ai_discovered",
    isVerified: true,
    isTrending: true,
    isCommunityPick: false,
    createdAt: new Date(NOW - 2 * HOUR).toISOString(),
    expiresAt: new Date(NOW + 72 * HOUR).toISOString(),
    lastVerifiedAt: new Date(NOW - 30 * 60000).toISOString(),
    dealUrl: "https://nike.com/sale",
    tags: ["fashion", "nike", "sneakers"],
  },
  {
    id: "deal-3",
    title: "$15 Off Your First DoorDash Order",
    description: "New customers get $15 off their first order with no minimum purchase required.",
    code: "WELCOME15",
    store: s("doordash"),
    category: c("food"),
    savingsType: "dollar_off",
    savingsAmount: "$15 OFF",
    savingsValue: 15,
    discountType: "code",
    conditions: "New customers only. First order.",
    upvotes: 956,
    downvotes: 31,
    workedYes: 512,
    workedNo: 24,
    commentCount: 36,
    usedLastHour: 167,
    status: "verified",
    source: "ai_discovered",
    isVerified: true,
    isTrending: true,
    isCommunityPick: false,
    createdAt: new Date(NOW - 5 * HOUR).toISOString(),
    lastVerifiedAt: new Date(NOW - 2 * HOUR).toISOString(),
    dealUrl: "https://doordash.com",
    tags: ["food", "delivery", "new-user"],
  },
  {
    id: "deal-4",
    title: "$200 Off MacBook Air M3",
    description: "Get Apple's latest MacBook Air with M3 chip at the lowest price ever. All colors available.",
    store: s("bestbuy"),
    category: c("electronics"),
    savingsType: "dollar_off",
    savingsAmount: "$200 OFF",
    savingsValue: 200,
    discountType: "deal",
    conditions: "While supplies last. All configurations.",
    upvotes: 2341,
    downvotes: 15,
    workedYes: 1089,
    workedNo: 7,
    commentCount: 94,
    usedLastHour: 203,
    status: "verified",
    source: "ai_discovered",
    isVerified: true,
    isTrending: true,
    isCommunityPick: true,
    createdAt: new Date(NOW - 6 * HOUR).toISOString(),
    expiresAt: new Date(NOW + 24 * HOUR).toISOString(),
    lastVerifiedAt: new Date(NOW - HOUR).toISOString(),
    dealUrl: "https://bestbuy.com/macbook-air",
    tags: ["electronics", "apple", "laptop"],
  },
  {
    id: "deal-5",
    title: "Buy 2 Get 1 Free â€” All Skincare",
    description: "Stock up on your favorite skincare brands. Mix and match across the entire skincare category.",
    store: s("sephora"),
    category: c("beauty"),
    savingsType: "bogo",
    savingsAmount: "B2G1 FREE",
    savingsValue: 33,
    discountType: "deal",
    conditions: "In-store and online. Lowest priced item is free.",
    upvotes: 876,
    downvotes: 9,
    workedYes: 423,
    workedNo: 5,
    commentCount: 31,
    usedLastHour: 87,
    status: "verified",
    source: "ai_discovered",
    isVerified: true,
    isTrending: true,
    isCommunityPick: true,
    createdAt: new Date(NOW - 4 * HOUR).toISOString(),
    expiresAt: new Date(NOW + 36 * HOUR).toISOString(),
    lastVerifiedAt: new Date(NOW - HOUR).toISOString(),
    dealUrl: "https://sephora.com/sale",
    tags: ["beauty", "skincare", "bogo"],
  },
  {
    id: "deal-6",
    title: "30% Off Home Essentials",
    description: "Save on furniture, decor, kitchen, bath, and bedding. Huge selection of top-rated home goods.",
    code: "HOME30",
    store: s("target"),
    category: c("home"),
    savingsType: "percent_off",
    savingsAmount: "30% OFF",
    savingsValue: 30,
    discountType: "code",
    conditions: "Select home department items.",
    upvotes: 723,
    downvotes: 12,
    workedYes: 387,
    workedNo: 9,
    commentCount: 27,
    usedLastHour: 76,
    status: "verified",
    source: "user_submitted",
    isVerified: true,
    isTrending: true,
    isCommunityPick: false,
    createdAt: new Date(NOW - 1 * HOUR).toISOString(),
    expiresAt: new Date(NOW + 60 * HOUR).toISOString(),
    lastVerifiedAt: new Date(NOW - 20 * 60000).toISOString(),
    dealUrl: "https://target.com/home",
    submittedBy: users[0],
    tags: ["home", "furniture", "decor"],
  },

  // â”€â”€ POPULAR / HIGH TRUST â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  {
    id: "deal-7",
    title: "$50 Off Annual Membership Renewal",
    description: "Renew your Costco membership and save $50. Valid for Gold Star and Executive members.",
    code: "RENEW50",
    store: s("costco"),
    category: c("home"),
    savingsType: "dollar_off",
    savingsAmount: "$50 OFF",
    savingsValue: 50,
    discountType: "code",
    conditions: "Existing members only. Renewal only.",
    upvotes: 1567,
    downvotes: 34,
    workedYes: 923,
    workedNo: 18,
    commentCount: 67,
    usedLastHour: 34,
    status: "verified",
    source: "ai_discovered",
    isVerified: true,
    isTrending: false,
    isCommunityPick: true,
    createdAt: new Date(NOW - 5 * DAY).toISOString(),
    lastVerifiedAt: new Date(NOW - 12 * HOUR).toISOString(),
    dealUrl: "https://costco.com/membership",
    tags: ["membership", "costco"],
  },
  {
    id: "deal-8",
    title: "70% Off 2-Year Plan + 3 Months Free",
    description: "Massive discount on NordVPN's 2-year plan. Includes 3 bonus months and threat protection.",
    store: s("nordvpn"),
    category: c("software"),
    savingsType: "percent_off",
    savingsAmount: "70% OFF",
    savingsValue: 70,
    discountType: "deal",
    conditions: "New subscribers only. 2-year commitment.",
    upvotes: 2109,
    downvotes: 42,
    workedYes: 1247,
    workedNo: 15,
    commentCount: 83,
    usedLastHour: 45,
    status: "verified",
    source: "ai_discovered",
    isVerified: true,
    isTrending: false,
    isCommunityPick: true,
    createdAt: new Date(NOW - 7 * DAY).toISOString(),
    lastVerifiedAt: new Date(NOW - 6 * HOUR).toISOString(),
    dealUrl: "https://nordvpn.com/deal",
    tags: ["software", "vpn", "security"],
  },
  {
    id: "deal-9",
    title: "40% Off Creative Cloud â€” All Apps",
    description: "Get the entire Adobe Creative Cloud suite at 40% off. Photoshop, Illustrator, Premiere Pro, and more.",
    store: s("adobe"),
    category: c("software"),
    savingsType: "percent_off",
    savingsAmount: "40% OFF",
    savingsValue: 40,
    discountType: "deal",
    conditions: "Annual plan, paid monthly. New subscribers.",
    upvotes: 1834,
    downvotes: 28,
    workedYes: 976,
    workedNo: 11,
    commentCount: 71,
    usedLastHour: 28,
    status: "verified",
    source: "ai_discovered",
    isVerified: true,
    isTrending: false,
    isCommunityPick: true,
    createdAt: new Date(NOW - 10 * DAY).toISOString(),
    lastVerifiedAt: new Date(NOW - 8 * HOUR).toISOString(),
    dealUrl: "https://adobe.com/creativecloud",
    tags: ["software", "creative", "design"],
  },
  {
    id: "deal-10",
    title: "$300 Off Galaxy S24 Ultra",
    description: "Samsung's flagship phone with AI features at the best price. Includes free Galaxy Buds.",
    store: s("samsung"),
    category: c("electronics"),
    savingsType: "dollar_off",
    savingsAmount: "$300 OFF",
    savingsValue: 300,
    discountType: "deal",
    conditions: "All storage sizes. Includes trade-in bonus.",
    upvotes: 1654,
    downvotes: 19,
    workedYes: 834,
    workedNo: 6,
    commentCount: 76,
    usedLastHour: 52,
    status: "verified",
    source: "ai_discovered",
    isVerified: true,
    isTrending: false,
    isCommunityPick: true,
    createdAt: new Date(NOW - 4 * DAY).toISOString(),
    expiresAt: new Date(NOW + 5 * DAY).toISOString(),
    lastVerifiedAt: new Date(NOW - 4 * HOUR).toISOString(),
    dealUrl: "https://samsung.com/galaxy-s24",
    tags: ["electronics", "phone", "samsung"],
  },
  {
    id: "deal-11",
    title: "Members Save 25% on One Full-Price Item",
    description: "REI members get 25% off any single full-price item. Great for gear upgrades.",
    code: "MEMBER25",
    store: s("rei"),
    category: c("sports"),
    savingsType: "percent_off",
    savingsAmount: "25% OFF",
    savingsValue: 25,
    discountType: "code",
    conditions: "REI members only. One item per member.",
    upvotes: 934,
    downvotes: 14,
    workedYes: 567,
    workedNo: 8,
    commentCount: 43,
    usedLastHour: 19,
    status: "verified",
    source: "ai_discovered",
    isVerified: true,
    isTrending: false,
    isCommunityPick: false,
    createdAt: new Date(NOW - 6 * DAY).toISOString(),
    expiresAt: new Date(NOW + 3 * DAY).toISOString(),
    lastVerifiedAt: new Date(NOW - 10 * HOUR).toISOString(),
    dealUrl: "https://rei.com/member-deal",
    tags: ["sports", "outdoors", "rei"],
  },
  {
    id: "deal-12",
    title: "$10 Off Orders $25+",
    description: "Save $10 on your next Uber Eats order when you spend $25 or more. All restaurants.",
    code: "SAVE10",
    store: s("ubereats"),
    category: c("food"),
    savingsType: "dollar_off",
    savingsAmount: "$10 OFF",
    savingsValue: 10,
    discountType: "code",
    conditions: "Min order $25. One per account.",
    upvotes: 678,
    downvotes: 22,
    workedYes: 345,
    workedNo: 19,
    commentCount: 28,
    usedLastHour: 56,
    status: "verified",
    source: "ai_discovered",
    isVerified: true,
    isTrending: false,
    isCommunityPick: false,
    createdAt: new Date(NOW - 2 * DAY).toISOString(),
    lastVerifiedAt: new Date(NOW - 3 * HOUR).toISOString(),
    dealUrl: "https://ubereats.com",
    tags: ["food", "delivery", "ubereats"],
  },

  // â”€â”€ JUST ADDED (recent, lower metrics) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  {
    id: "deal-13",
    title: "30% Off Sitewide",
    description: "Adidas sitewide sale â€” 30% off everything including new arrivals and collaborations.",
    code: "ADIDAS30",
    store: s("adidas"),
    category: c("fashion"),
    savingsType: "percent_off",
    savingsAmount: "30% OFF",
    savingsValue: 30,
    discountType: "code",
    conditions: "Excludes Yeezy and limited editions.",
    upvotes: 89,
    downvotes: 2,
    workedYes: 34,
    workedNo: 1,
    commentCount: 8,
    usedLastHour: 23,
    status: "newly_added",
    source: "ai_discovered",
    isVerified: true,
    isTrending: false,
    isCommunityPick: false,
    createdAt: new Date(NOW - 45 * 60000).toISOString(),
    expiresAt: new Date(NOW + 4 * DAY).toISOString(),
    lastVerifiedAt: new Date(NOW - 20 * 60000).toISOString(),
    dealUrl: "https://adidas.com",
    tags: ["fashion", "adidas", "sneakers"],
  },
  {
    id: "deal-14",
    title: "Free Shipping on $45+ Orders",
    description: "Get free standard shipping on all Home Depot orders over $45. No code needed.",
    store: s("homedepot"),
    category: c("home"),
    savingsType: "free_shipping",
    savingsAmount: "FREE SHIP",
    savingsValue: 0,
    discountType: "deal",
    conditions: "Orders $45+. Standard shipping only.",
    upvotes: 45,
    downvotes: 1,
    workedYes: 28,
    workedNo: 0,
    commentCount: 4,
    usedLastHour: 12,
    status: "newly_added",
    source: "ai_discovered",
    isVerified: true,
    isTrending: false,
    isCommunityPick: false,
    createdAt: new Date(NOW - 30 * 60000).toISOString(),
    lastVerifiedAt: new Date(NOW - 15 * 60000).toISOString(),
    dealUrl: "https://homedepot.com",
    tags: ["home", "shipping", "homedepot"],
  },
  {
    id: "deal-15",
    title: "3 Months Free Spotify Premium",
    description: "New users get 3 months of Spotify Premium completely free. Cancel anytime.",
    store: s("spotify"),
    category: c("software"),
    savingsType: "free_trial",
    savingsAmount: "3 MO FREE",
    savingsValue: 30,
    discountType: "deal",
    conditions: "New Premium subscribers only.",
    upvotes: 156,
    downvotes: 3,
    workedYes: 89,
    workedNo: 2,
    commentCount: 12,
    usedLastHour: 41,
    status: "newly_added",
    source: "ai_discovered",
    isVerified: true,
    isTrending: false,
    isCommunityPick: false,
    createdAt: new Date(NOW - 2 * HOUR).toISOString(),
    lastVerifiedAt: new Date(NOW - HOUR).toISOString(),
    dealUrl: "https://spotify.com/premium",
    tags: ["software", "music", "streaming"],
  },
  {
    id: "deal-16",
    title: "Up to 70% Off Clearance Furniture",
    description: "Massive clearance event on furniture, rugs, lighting and decor. While supplies last.",
    store: s("wayfair"),
    category: c("home"),
    savingsType: "percent_off",
    savingsAmount: "70% OFF",
    savingsValue: 70,
    discountType: "sale",
    conditions: "Clearance items only. Final sale.",
    upvotes: 67,
    downvotes: 4,
    workedYes: 41,
    workedNo: 3,
    commentCount: 9,
    usedLastHour: 18,
    status: "newly_added",
    source: "user_submitted",
    isVerified: true,
    isTrending: false,
    isCommunityPick: false,
    createdAt: new Date(NOW - 90 * 60000).toISOString(),
    lastVerifiedAt: new Date(NOW - 60 * 60000).toISOString(),
    dealUrl: "https://wayfair.com/clearance",
    submittedBy: users[1],
    tags: ["home", "furniture", "clearance"],
  },
  {
    id: "deal-17",
    title: "$25 Off $250+ Purchase",
    description: "Save $25 when you spend $250 or more at Lowe's. Valid on everything in store and online.",
    code: "SAVE25",
    store: s("lowes"),
    category: c("home"),
    savingsType: "dollar_off",
    savingsAmount: "$25 OFF",
    savingsValue: 25,
    discountType: "code",
    conditions: "Min purchase $250. One per customer.",
    upvotes: 34,
    downvotes: 0,
    workedYes: 18,
    workedNo: 1,
    commentCount: 3,
    usedLastHour: 7,
    status: "newly_added",
    source: "user_submitted",
    isVerified: true,
    isTrending: false,
    isCommunityPick: false,
    createdAt: new Date(NOW - 20 * 60000).toISOString(),
    lastVerifiedAt: new Date(NOW - 10 * 60000).toISOString(),
    dealUrl: "https://lowes.com",
    submittedBy: users[3],
    tags: ["home", "improvement", "lowes"],
  },
  {
    id: "deal-18",
    title: "40% Off First Autoship Order",
    description: "New Chewy customers save 40% on their first Autoship order. Pet food, treats, and supplies.",
    store: s("chewy"),
    category: c("pets"),
    savingsType: "percent_off",
    savingsAmount: "40% OFF",
    savingsValue: 40,
    discountType: "deal",
    conditions: "First Autoship order only. New customers.",
    upvotes: 52,
    downvotes: 1,
    workedYes: 29,
    workedNo: 0,
    commentCount: 6,
    usedLastHour: 15,
    status: "newly_added",
    source: "ai_discovered",
    isVerified: true,
    isTrending: false,
    isCommunityPick: false,
    createdAt: new Date(NOW - 3 * HOUR).toISOString(),
    lastVerifiedAt: new Date(NOW - 2 * HOUR).toISOString(),
    dealUrl: "https://chewy.com/autoship",
    tags: ["pets", "food", "chewy"],
  },

  // â”€â”€ EXPIRING SOON â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  {
    id: "deal-19",
    title: "Extra 20% Off with Star Rewards",
    description: "Macy's Star Rewards members get an extra 20% off. Stack with sale prices.",
    code: "STAR20",
    store: s("macys"),
    category: c("fashion"),
    savingsType: "percent_off",
    savingsAmount: "20% OFF",
    savingsValue: 20,
    discountType: "code",
    conditions: "Star Rewards members. Most items.",
    upvotes: 456,
    downvotes: 8,
    workedYes: 234,
    workedNo: 6,
    commentCount: 19,
    usedLastHour: 34,
    status: "expiring_soon",
    source: "ai_discovered",
    isVerified: true,
    isTrending: false,
    isCommunityPick: false,
    createdAt: new Date(NOW - 3 * DAY).toISOString(),
    expiresAt: new Date(NOW + 4 * HOUR).toISOString(),
    lastVerifiedAt: new Date(NOW - HOUR).toISOString(),
    dealUrl: "https://macys.com",
    tags: ["fashion", "macys", "rewards"],
  },
  {
    id: "deal-20",
    title: "Free Shipping on All Orders",
    description: "No minimum purchase required. Free standard shipping on every Nordstrom order.",
    store: s("nordstrom"),
    category: c("fashion"),
    savingsType: "free_shipping",
    savingsAmount: "FREE SHIP",
    savingsValue: 0,
    discountType: "deal",
    conditions: "Standard shipping. All orders.",
    upvotes: 389,
    downvotes: 5,
    workedYes: 267,
    workedNo: 2,
    commentCount: 14,
    usedLastHour: 28,
    status: "expiring_soon",
    source: "ai_discovered",
    isVerified: true,
    isTrending: false,
    isCommunityPick: false,
    createdAt: new Date(NOW - 5 * DAY).toISOString(),
    expiresAt: new Date(NOW + 12 * HOUR).toISOString(),
    lastVerifiedAt: new Date(NOW - 2 * HOUR).toISOString(),
    dealUrl: "https://nordstrom.com",
    tags: ["fashion", "shipping", "nordstrom"],
  },
  {
    id: "deal-21",
    title: "Free $100 Gift Card with Mac Purchase",
    description: "Buy any Mac and get a free $100 Apple gift card. Valid for MacBook, iMac, Mac Mini, and Mac Pro.",
    store: s("apple"),
    category: c("electronics"),
    savingsType: "cashback",
    savingsAmount: "$100 FREE",
    savingsValue: 100,
    discountType: "deal",
    conditions: "Any Mac purchase. One gift card per customer.",
    upvotes: 1234,
    downvotes: 11,
    workedYes: 678,
    workedNo: 4,
    commentCount: 52,
    usedLastHour: 67,
    status: "expiring_soon",
    source: "ai_discovered",
    isVerified: true,
    isTrending: false,
    isCommunityPick: true,
    createdAt: new Date(NOW - 7 * DAY).toISOString(),
    expiresAt: new Date(NOW + 18 * HOUR).toISOString(),
    lastVerifiedAt: new Date(NOW - 3 * HOUR).toISOString(),
    dealUrl: "https://apple.com/shop",
    tags: ["electronics", "apple", "mac"],
  },
  {
    id: "deal-22",
    title: "30% Off Your Next Order",
    description: "Save 30% on your next Grubhub order. No minimum. Works on delivery and pickup.",
    code: "GRUB30",
    store: s("grubhub"),
    category: c("food"),
    savingsType: "percent_off",
    savingsAmount: "30% OFF",
    savingsValue: 30,
    discountType: "code",
    conditions: "One use per account.",
    upvotes: 287,
    downvotes: 12,
    workedYes: 156,
    workedNo: 14,
    commentCount: 21,
    usedLastHour: 43,
    status: "expiring_soon",
    source: "ai_discovered",
    isVerified: true,
    isTrending: false,
    isCommunityPick: false,
    createdAt: new Date(NOW - 2 * DAY).toISOString(),
    expiresAt: new Date(NOW + 24 * HOUR).toISOString(),
    lastVerifiedAt: new Date(NOW - 4 * HOUR).toISOString(),
    dealUrl: "https://grubhub.com",
    tags: ["food", "delivery", "grubhub"],
  },
  {
    id: "deal-23",
    title: "$15 Off Grocery Orders $75+",
    description: "Save on your weekly grocery haul at Walmart. Online and pickup orders.",
    code: "GROCERY15",
    store: s("walmart"),
    category: c("food"),
    savingsType: "dollar_off",
    savingsAmount: "$15 OFF",
    savingsValue: 15,
    discountType: "code",
    conditions: "Grocery orders $75+. Online only.",
    upvotes: 534,
    downvotes: 9,
    workedYes: 312,
    workedNo: 7,
    commentCount: 24,
    usedLastHour: 38,
    status: "expiring_soon",
    source: "ai_discovered",
    isVerified: true,
    isTrending: false,
    isCommunityPick: false,
    createdAt: new Date(NOW - 4 * DAY).toISOString(),
    expiresAt: new Date(NOW + 36 * HOUR).toISOString(),
    lastVerifiedAt: new Date(NOW - 5 * HOUR).toISOString(),
    dealUrl: "https://walmart.com/grocery",
    tags: ["food", "grocery", "walmart"],
  },
  {
    id: "deal-24",
    title: "49% Off 12-Month VPN Plan",
    description: "Get ExpressVPN for 49% off. Includes 3 free months on the annual plan.",
    store: s("nordvpn"),
    category: c("software"),
    savingsType: "percent_off",
    savingsAmount: "49% OFF",
    savingsValue: 49,
    discountType: "deal",
    conditions: "Annual plan. New subscribers.",
    upvotes: 312,
    downvotes: 7,
    workedYes: 189,
    workedNo: 4,
    commentCount: 16,
    usedLastHour: 21,
    status: "expiring_soon",
    source: "ai_discovered",
    isVerified: true,
    isTrending: false,
    isCommunityPick: false,
    createdAt: new Date(NOW - 6 * DAY).toISOString(),
    expiresAt: new Date(NOW + 48 * HOUR).toISOString(),
    lastVerifiedAt: new Date(NOW - 6 * HOUR).toISOString(),
    dealUrl: "https://nordvpn.com/annual",
    tags: ["software", "vpn"],
  },

  // â”€â”€ CATEGORY FILLERS & ADDITIONAL DEALS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  {
    id: "deal-25",
    title: "15% Off Your First Order",
    description: "New SHEIN customers get 15% off their entire first order. Fashion, accessories, and home.",
    code: "SHEIN15",
    store: s("shein"),
    category: c("fashion"),
    savingsType: "percent_off",
    savingsAmount: "15% OFF",
    savingsValue: 15,
    discountType: "code",
    conditions: "New customers only.",
    upvotes: 423,
    downvotes: 34,
    workedYes: 234,
    workedNo: 28,
    commentCount: 45,
    usedLastHour: 67,
    status: "verified",
    source: "ai_discovered",
    isVerified: true,
    isTrending: false,
    isCommunityPick: false,
    createdAt: new Date(NOW - 8 * DAY).toISOString(),
    lastVerifiedAt: new Date(NOW - 12 * HOUR).toISOString(),
    dealUrl: "https://shein.com",
    tags: ["fashion", "shein", "new-user"],
  },
  {
    id: "deal-26",
    title: "$50 Off Ring Video Doorbell Pro",
    description: "Save $50 on Ring Video Doorbell Pro 2. Smart home security with HD video and two-way talk.",
    store: s("amazon"),
    category: c("electronics"),
    savingsType: "dollar_off",
    savingsAmount: "$50 OFF",
    savingsValue: 50,
    discountType: "deal",
    conditions: "Limited time offer.",
    upvotes: 267,
    downvotes: 4,
    workedYes: 178,
    workedNo: 2,
    commentCount: 15,
    usedLastHour: 24,
    status: "verified",
    source: "ai_discovered",
    isVerified: true,
    isTrending: false,
    isCommunityPick: false,
    createdAt: new Date(NOW - 3 * DAY).toISOString(),
    lastVerifiedAt: new Date(NOW - 8 * HOUR).toISOString(),
    dealUrl: "https://amazon.com/ring-doorbell",
    tags: ["electronics", "smart-home", "amazon"],
  },
  {
    id: "deal-27",
    title: "Free Shipping for Nike Members",
    description: "All Nike members get free standard shipping on every order. No minimum purchase.",
    store: s("nike"),
    category: c("fashion"),
    savingsType: "free_shipping",
    savingsAmount: "FREE SHIP",
    savingsValue: 0,
    discountType: "deal",
    conditions: "Nike membership required (free to join).",
    upvotes: 567,
    downvotes: 6,
    workedYes: 423,
    workedNo: 3,
    commentCount: 18,
    usedLastHour: 31,
    status: "verified",
    source: "ai_discovered",
    isVerified: true,
    isTrending: false,
    isCommunityPick: false,
    createdAt: new Date(NOW - 14 * DAY).toISOString(),
    lastVerifiedAt: new Date(NOW - DAY).toISOString(),
    dealUrl: "https://nike.com/membership",
    tags: ["fashion", "shipping", "nike"],
  },
  {
    id: "deal-28",
    title: "BOGO 50% Off â€” All Toys",
    description: "Buy one toy, get the second at 50% off. All brands including LEGO, Barbie, Hot Wheels, and more.",
    store: s("target"),
    category: c("home"),
    savingsType: "bogo",
    savingsAmount: "BOGO 50%",
    savingsValue: 25,
    discountType: "deal",
    conditions: "Mix and match. Lower priced item is 50% off.",
    upvotes: 345,
    downvotes: 7,
    workedYes: 198,
    workedNo: 3,
    commentCount: 22,
    usedLastHour: 41,
    status: "verified",
    source: "ai_discovered",
    isVerified: true,
    isTrending: false,
    isCommunityPick: false,
    createdAt: new Date(NOW - 2 * DAY).toISOString(),
    expiresAt: new Date(NOW + 7 * DAY).toISOString(),
    lastVerifiedAt: new Date(NOW - 6 * HOUR).toISOString(),
    dealUrl: "https://target.com/toys",
    tags: ["toys", "kids", "target"],
  },
  {
    id: "deal-29",
    title: "20% Off Open-Box Laptops",
    description: "Save an extra 20% on all open-box and refurbished laptops at Best Buy. Certified quality.",
    store: s("bestbuy"),
    category: c("electronics"),
    savingsType: "percent_off",
    savingsAmount: "20% OFF",
    savingsValue: 20,
    discountType: "deal",
    conditions: "Open-box items only. Condition: Excellent or Satisfactory.",
    upvotes: 189,
    downvotes: 5,
    workedYes: 112,
    workedNo: 4,
    commentCount: 14,
    usedLastHour: 16,
    status: "verified",
    source: "ai_discovered",
    isVerified: true,
    isTrending: false,
    isCommunityPick: false,
    createdAt: new Date(NOW - 5 * DAY).toISOString(),
    lastVerifiedAt: new Date(NOW - DAY).toISOString(),
    dealUrl: "https://bestbuy.com/open-box",
    tags: ["electronics", "laptops", "refurbished"],
  },
  {
    id: "deal-30",
    title: "BOGO 50% Off Galaxy Buds3",
    description: "Buy one pair of Galaxy Buds3 and get the second pair at 50% off. Perfect for gifting.",
    store: s("samsung"),
    category: c("electronics"),
    savingsType: "bogo",
    savingsAmount: "BOGO 50%",
    savingsValue: 25,
    discountType: "deal",
    conditions: "Galaxy Buds3 and Buds3 Pro. Mix and match.",
    upvotes: 234,
    downvotes: 3,
    workedYes: 145,
    workedNo: 2,
    commentCount: 11,
    usedLastHour: 19,
    status: "verified",
    source: "ai_discovered",
    isVerified: true,
    isTrending: false,
    isCommunityPick: false,
    createdAt: new Date(NOW - 4 * DAY).toISOString(),
    expiresAt: new Date(NOW + 10 * DAY).toISOString(),
    lastVerifiedAt: new Date(NOW - 12 * HOUR).toISOString(),
    dealUrl: "https://samsung.com/galaxy-buds",
    tags: ["electronics", "audio", "samsung"],
  },
  {
    id: "deal-31",
    title: "25% Off DashPass Orders",
    description: "DashPass members save an extra 25% on eligible orders this week. Stack with restaurant deals.",
    code: "DASH25",
    store: s("doordash"),
    category: c("food"),
    savingsType: "percent_off",
    savingsAmount: "25% OFF",
    savingsValue: 25,
    discountType: "code",
    conditions: "DashPass members. Eligible restaurants.",
    upvotes: 198,
    downvotes: 8,
    workedYes: 112,
    workedNo: 9,
    commentCount: 16,
    usedLastHour: 34,
    status: "verified",
    source: "user_submitted",
    isVerified: true,
    isTrending: false,
    isCommunityPick: false,
    createdAt: new Date(NOW - DAY).toISOString(),
    lastVerifiedAt: new Date(NOW - 4 * HOUR).toISOString(),
    dealUrl: "https://doordash.com",
    submittedBy: users[2],
    tags: ["food", "delivery", "dashpass"],
  },
  {
    id: "deal-32",
    title: "$25 Off $75+ Purchase",
    description: "Save $25 at Sephora when you spend $75 or more. All brands and categories included.",
    code: "BEAUTY25",
    store: s("sephora"),
    category: c("beauty"),
    savingsType: "dollar_off",
    savingsAmount: "$25 OFF",
    savingsValue: 25,
    discountType: "code",
    conditions: "Min $75 purchase. All items.",
    upvotes: 567,
    downvotes: 11,
    workedYes: 345,
    workedNo: 8,
    commentCount: 34,
    usedLastHour: 29,
    status: "verified",
    source: "ai_discovered",
    isVerified: true,
    isTrending: false,
    isCommunityPick: false,
    createdAt: new Date(NOW - 6 * DAY).toISOString(),
    lastVerifiedAt: new Date(NOW - 8 * HOUR).toISOString(),
    dealUrl: "https://sephora.com",
    tags: ["beauty", "sephora", "skincare"],
  },
  {
    id: "deal-33",
    title: "20% Off Entire Purchase",
    description: "Save 20% on everything at Ulta. Makeup, skincare, haircare, and fragrances.",
    code: "GORGEOUS",
    store: s("ulta"),
    category: c("beauty"),
    savingsType: "percent_off",
    savingsAmount: "20% OFF",
    savingsValue: 20,
    discountType: "code",
    conditions: "Excludes prestige brands.",
    upvotes: 412,
    downvotes: 9,
    workedYes: 267,
    workedNo: 7,
    commentCount: 28,
    usedLastHour: 22,
    status: "verified",
    source: "ai_discovered",
    isVerified: true,
    isTrending: false,
    isCommunityPick: false,
    createdAt: new Date(NOW - 4 * DAY).toISOString(),
    expiresAt: new Date(NOW + 6 * DAY).toISOString(),
    lastVerifiedAt: new Date(NOW - 12 * HOUR).toISOString(),
    dealUrl: "https://ulta.com",
    tags: ["beauty", "ulta", "makeup"],
  },
  {
    id: "deal-34",
    title: "30% Off Select Power Tools",
    description: "Save 30% on select DeWalt, Milwaukee, and Makita power tools. Pro-grade equipment.",
    store: s("homedepot"),
    category: c("home"),
    savingsType: "percent_off",
    savingsAmount: "30% OFF",
    savingsValue: 30,
    discountType: "sale",
    conditions: "Select tools only. While supplies last.",
    upvotes: 289,
    downvotes: 4,
    workedYes: 167,
    workedNo: 2,
    commentCount: 19,
    usedLastHour: 13,
    status: "verified",
    source: "ai_discovered",
    isVerified: true,
    isTrending: false,
    isCommunityPick: false,
    createdAt: new Date(NOW - 3 * DAY).toISOString(),
    lastVerifiedAt: new Date(NOW - DAY).toISOString(),
    dealUrl: "https://homedepot.com/tools",
    tags: ["home", "tools", "power-tools"],
  },
  {
    id: "deal-35",
    title: "Extra 40% Off Clearance",
    description: "Nike clearance prices just dropped again. Extra 40% off already-reduced styles.",
    code: "CLEAR40",
    store: s("nike"),
    category: c("fashion"),
    savingsType: "percent_off",
    savingsAmount: "40% OFF",
    savingsValue: 40,
    discountType: "code",
    conditions: "Clearance items only. While supplies last.",
    upvotes: 1456,
    downvotes: 16,
    workedYes: 876,
    workedNo: 9,
    commentCount: 63,
    usedLastHour: 89,
    status: "verified",
    source: "ai_discovered",
    isVerified: true,
    isTrending: false,
    isCommunityPick: true,
    createdAt: new Date(NOW - 2 * DAY).toISOString(),
    expiresAt: new Date(NOW + 5 * DAY).toISOString(),
    lastVerifiedAt: new Date(NOW - 4 * HOUR).toISOString(),
    dealUrl: "https://nike.com/clearance",
    tags: ["fashion", "nike", "clearance"],
  },
];

export const deals: Deal[] = (rawDeals as any[]).map((d) => ({
  ...d,
  slug: generateDealSlug(d.title, d.store.slug),
  discount: d.savingsAmount || "",
  netVotes: (d.upvotes || 0) - (d.downvotes || 0),
  viewCount: (d.usedLastHour || 0) * 10,
} as Deal));

// â”€â”€â”€ Section Helpers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

/** Hot Right Now: highest usedLastHour + isTrending */
export function getHotDeals(limit = 6): Deal[] {
  return [...deals]
    .filter((d) => d.status !== "expired")
    .sort((a, b) => b.usedLastHour - a.usedLastHour)
    .slice(0, limit);
}

/** Most Popular: highest net upvotes */
export function getPopularDeals(limit = 12): Deal[] {
  return [...deals]
    .filter((d) => d.status !== "expired")
    .sort((a, b) => (b.upvotes - b.downvotes) - (a.upvotes - a.downvotes))
    .slice(0, limit);
}

/** Just Added: most recent createdAt */
export function getNewDeals(limit = 10): Deal[] {
  return [...deals]
    .sort((a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime())
    .slice(0, limit);
}

/** Expiring Soon: has expiresAt within 72 hours, sorted by soonest */
export function getExpiringSoon(limit = 6): Deal[] {
  const cutoff = NOW + 72 * HOUR;
  return [...deals]
    .filter((d) => d.expiresAt && new Date(d.expiresAt).getTime() <= cutoff && new Date(d.expiresAt).getTime() > NOW)
    .sort((a, b) => new Date(a.expiresAt!).getTime() - new Date(b.expiresAt!).getTime())
    .slice(0, limit);
}

/** Top deals by category */
export function getDealsByCategory(categoryId: string, limit = 8): Deal[] {
  return [...deals]
    .filter((d) => d.category.id === categoryId && d.status !== "expired")
    .sort((a, b) => (b.upvotes - b.downvotes) - (a.upvotes - a.downvotes))
    .slice(0, limit);
}

/** Most Confirmed: highest workedYes with min 50 */
export function getMostConfirmed(limit = 8): Deal[] {
  return [...deals]
    .filter((d) => d.workedYes >= 50)
    .sort((a, b) => b.workedYes - a.workedYes)
    .slice(0, limit);
}

/** Get deals for a specific store */
export function getStoreDeals(storeSlug: string): Deal[] {
  return deals.filter((d) => d.store.slug === storeSlug);
}

/** Get store by slug */
export function getStoreBySlug(slug: string): Store | undefined {
  return stores.find((s) => s.slug === slug);
}

/** Get category by slug */
export function getCategoryBySlug(slug: string): Category | undefined {
  return categories.find((c) => c.slug === slug);
}

// â”€â”€â”€ Sample Comments â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
export const sampleComments: Comment[] = [
  {
    id: "c1", dealId: "deal-1", user: users[0],
    content: "Just used this â€” worked perfectly! Saved $120 on Sony WH-1000XM5 headphones.",
    createdAt: new Date(NOW - 2 * HOUR).toISOString(), upvotes: 34,
  },
  {
    id: "c2", dealId: "deal-1", user: users[2],
    content: "Pro tip: this also stacks with Subscribe & Save for an additional 5% off.",
    createdAt: new Date(NOW - HOUR).toISOString(), upvotes: 67,
  },
  {
    id: "c3", dealId: "deal-4", user: users[4],
    content: "Best MacBook Air deal I've seen this year. Grabbed the 16GB/512GB config.",
    createdAt: new Date(NOW - 4 * HOUR).toISOString(), upvotes: 45,
  },
  {
    id: "c4", dealId: "deal-4", user: users[1],
    content: "Can confirm this works in-store too! Just picked mine up.",
    createdAt: new Date(NOW - 3 * HOUR).toISOString(), upvotes: 28,
  },
  {
    id: "c5", dealId: "deal-2", user: users[3],
    content: "FYI: doesn't work on Jordan brand or collabs. Everything else is fair game.",
    createdAt: new Date(NOW - 90 * 60000).toISOString(), upvotes: 56,
  },
  {
    id: "c6", dealId: "deal-8", user: users[0],
    content: "Been using NordVPN for a year with this deal. No complaints, solid speeds.",
    createdAt: new Date(NOW - 2 * DAY).toISOString(), upvotes: 89,
  },
];
